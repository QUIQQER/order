<header class="quiqqer-order-control-order-header">
    <h1>
        {locale group="quiqqer/order" var="control.order.details.title"}
    </h1>

    <div class="quiqqer-order-control-order-header-date">
        <span>{locale group="quiqqer/order" var="control.order.details.date"}</span>
        <span>{$Order->getCreateDate()}</span>
    </div>

    <span class="quiqqer-order-control-order-header-placer">|</span>

    <div class="quiqqer-order-control-order-header-id">
        <span>{locale group="quiqqer/order" var="control.order.details.orderNo"}</span>
        <span>{$Order->getId()}</span>
    </div>

    <span class="quiqqer-order-control-order-header-placer">|</span>

    <div class="quiqqer-order-control-order-header-id">
        {if $Order->isPosted()}
        <a href="{$Order->getAttribute('downloadLink')}" target="_blank">
            <span class="fa fa-file-pdf-o"></span>
            <span>{locale group="quiqqer/order" var="control.order.details.invoice"}</span>
        </a>
        {else if $Order->isSuccessful() === false}
        <a href="{$orderUrl}" target="_blank" class="">
            <span class="fa fa-shopping-basket"></span>
            <span>{locale group="quiqqer/order" var="control.order.details.continuePayment"}</span>
        </a>
        {/if}
    </div>
</header>

<div class="quiqqer-order-control-order-information">
    <section class="quiqqer-order-control-order-information-invoiceAddress">
        <header>
            <h2>
                {locale group="quiqqer/order" var="control.order.invoiceAddress.title"}
            </h2>
        </header>
        <span>{locale group="quiqqer/order" var="control.profile.orders.order.invoiceAddress"}</span>
        {if $Invoice}
        {assign var=Customer value=$Invoice->getCustomer()}
        {else}
        {assign var=Customer value=$Order->getCustomer()}
        {/if}

        {assign var=Address value=$Customer->getAddress()}
        {$Address->render()}
    </section>

    <section class="quiqqer-order-control-order-information-orderData">
        <header>
            <h2>
                {locale group="quiqqer/order" var="control.order.overview.title"}
            </h2>
        </header>

        <table class="quiqqer-order-control-order-information-orderData-table">
            <tr>
                <td>
                    {locale group="quiqqer/order" var="control.order.overview.subSum"}
                </td>
                <td class="quiqqer-order-control-order-information-orderData-factor-subSum">
                    {$Calculation->getSubSum()->formatted()}
                </td>
            </tr>
            {foreach $PriceFactors as $Factor}
            <tr>
                <td>{$Factor->getTitle()}</td>
                <td class="quiqqer-order-control-order-information-orderData-factor-sum">
                    {$Factor->getSumFormatted()}
                </td>
            </tr>
            {/foreach}
            <tr>
                <td>
                    {locale group="quiqqer/order" var="control.order.overview.sum"}
                </td>
                <td class="quiqqer-order-control-order-information-orderData-sum">
                    {$Calculation->getSum()->formatted()}
                </td>
            </tr>
        </table>
    </section>

    {if $Payment}
    <section class="quiqqer-order-control-order-information-payment">
        <header>
            <h2>
                {locale group="quiqqer/order" var="control.order.payment.title"}
            </h2>
        </header>
        {$Payment->getTitle()}
    </section>
    {/if}
</div>

<section class="quiqqer-order-control-order-articles">
    <header>
        <h2>
            {locale group="quiqqer/order" var="control.order.article.title"}
        </h2>
    </header>

    {assign var=pos value=1}
    {foreach $Articles as $Article}
    <article>
        <div class="quiqqer-order-profile-orders-order-articles-article-pos">
            {$pos}.
        </div>

        <div class="quiqqer-order-profile-orders-order-articles-article-image">
            {if $Article->getImage()}
            {image image=$Article->getImage() height=200}
            {/if}

            {if $Article->getQuantity() > 1}
            <div class="quiqqer-order-profile-orders-order-articles-article-quantity">
                {$Article->getQuantity()}
            </div>
            {/if}
        </div>

        <div class="quiqqer-order-profile-orders-order-articles-article-information">
            <div class="quiqqer-order-profile-orders-order-articles-article-title">
                {$Article->getTitle()}
            </div>

            <div class="quiqqer-order-profile-orders-order-articles-article-description">
                {$Article->getDescription()}
            </div>

            <div class="quiqqer-order-profile-orders-order-articles-article-price">
                {$Article->getPrice()->getDisplayPrice()}
            </div>
        </div>
    </article>
    {assign var=pos value=$pos+1}
    {/foreach}
</section>