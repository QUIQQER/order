<section class="quiqqer-order-customerData">
    <header>
        <h1>
            {locale group="quiqqer/order" var="ordering.step.title.CustomerData"}

            <button name="open-edit" disabled class="btn-light">
                <span class="quiqqer-order-customerData-edit-icon fa fa-edit"></span>
                <span class="quiqqer-order-customerData-edit-text">
                    {locale group="quiqqer/order" var="ordering.step.title.CustomerData.addressEdit"}
                </span>
            </button>
        </h1>
    </header>

    {template_event name="quiqqer::order::orderProcessCustomerDataBegin" User=$User Address=$Address}

    <div class="quiqqer-order-customerData-display">
        <div class="quiqqer-order-customerData-display-customerNo">
            <span>
                {locale group="quiqqer/order" var="ordering.step.title.CustomerData.customerNo"}
            </span>
            <span>{$User->getId()}</span>
        </div>

        <div class="quiqqer-order-customerData-display-eMail">
            <span>
                {locale group="quiqqer/order" var="ordering.step.title.CustomerData.eMail"}
            </span>
            <span>{$User->getAttribute('email')}</span>
        </div>

        <div class="quiqqer-order-customerData-display-tel">
            <span>
                {locale group="quiqqer/order" var="ordering.step.title.CustomerData.tel"}
            </span>
            <span>{if $Address->getPhone()}{$Address->getPhone()}{else}-{/if}</span>
        </div>

        <div class="quiqqer-order-customerData-display-address">
            <span class="quiqqer-order-customerData-display-address-label">
                {locale group="quiqqer/order" var="ordering.step.title.CustomerData.address"}
            </span>
            {$Address->render()}
        </div>
    </div>

    <div class="quiqqer-order-customerData-edit">
        <div class="quiqqer-order-customerData-edit-close">
            <span class="fa fa-close"></span>
        </div>

        <input type="hidden"
               name="addressId"
               value="{$Address->getId()}"
        />

        <label class="quiqqer-order-customerData-edit-businessType">
            <span>
                {locale group="quiqqer/order" var="ordering.step.title.CustomerData.businessType"}
            </span>
            <select name="businessType">
                <option value="b2c">
                    {locale group="quiqqer/order" var="ordering.step.title.CustomerData.businessType.b2c"}
                </option>
                <option value="b2b" {$b2bSelected}>
                    {locale group="quiqqer/order" var="ordering.step.title.CustomerData.businessType.b2b"}
                </option>
            </select>
        </label>

        <label class="quiqqer-order-customerData-edit-company">
            <span>{locale group="quiqqer/order" var="company"}</span>
            <input type="text"
                   name="company"
                   autocomplete="organization"
                   value="{$Address->getAttribute('company')|escape:'html'}"
            />
        </label>
        <label class="quiqqer-order-customerData-edit-vatId">
            <span>{locale group="quiqqer/order" var="vatId"}</span>
            <input type="text"
                   name="vatId"
                   value="{$User->getAttribute('quiqqer.erp.euVatId')|escape:'html'}"
            />
        </label>

        {if $isB2B}
        <style type="text/css">
            .quiqqer-order-customerData-edit-businessType {
                display: none;
            }
        </style>
        {/if}

        {if $isB2B === false}
        <style type="text/css">
            .quiqqer-order-customerData-edit-company,
            .quiqqer-order-customerData-edit-vatId {
                display: none;
            }
        </style>
        {/if}

        <label class="quiqqer-order-customerData-edit-salutation">
            <span>{locale group="quiqqer/frontend-users" var="salutation"}</span>
            <input type="text"
                   name="salutation"
                   autocomplete
                   maxlength="10"
                   value="{$Address->getAttribute('salutation')|escape:'html'}"
            />
        </label>

        <label class="quiqqer-order-customerData-edit-firstname">
            <span>{locale group="quiqqer/frontend-users" var="firstname"}</span>
            <input type="text"
                   name="firstname"
                   autocomplete="given-name"
                   value="{$Address->getAttribute('firstname')|escape:'html'}"
                   required
            />
        </label>

        <label class="quiqqer-order-customerData-edit-lastname">
            <span>{locale group="quiqqer/frontend-users" var="lastname"}</span>
            <input type="text"
                   name="lastname"
                   autocomplete="family-name"
                   value="{$Address->getAttribute('lastname')|escape:'html'}"
                   required
            />
        </label>

        <label class="quiqqer-order-customerData-edit-street_no">
            <span>{locale group="quiqqer/frontend-users" var="street_no"}</span>
            <input type="text"
                   name="street_no"
                   autocomplete="address-line1"
                   value="{$Address->getAttribute('street_no')|escape:'html'}"
                   required
            />
        </label>

        <label class="quiqqer-order-customerData-edit-zip">
            <span>{locale group="quiqqer/frontend-users" var="zip"}</span>
            <input type="text"
                   name="zip"
                   autocomplete="postal-code"
                   value="{$Address->getAttribute('zip')|escape:'html'}"
                   required
            />
        </label>

        <label class="quiqqer-order-customerData-edit-city">
            <span>{locale group="quiqqer/frontend-users" var="city"}</span>
            <input type="text"
                   name="city"
                   autocomplete="city-name"
                   value="{$Address->getAttribute('city')|escape:'html'}"
                   required
            />
        </label>

        <label class="quiqqer-order-customerData-edit-country">
            <span>{locale group="quiqqer/frontend-users" var="country"}</span>
            {control name="country" control="QUI\Countries\Controls\Select"
            selected=$Address->getAttribute('country')
            required="required"
            use-geo-location=true
            }
        </label>

        <label class="quiqqer-order-customerData-edit-tel">
            <span>{locale group="quiqqer/order" var="ordering.step.title.CustomerData.tel"}</span>
            <input type="text"
                   name="tel"
                   autocomplete="tel"
                   value="{if $Address->getPhone()}{$Address->getPhone()}{/if}"
            />
        </label>

        <input type="submit" name="save-edit-address"
               value="{locale group='quiqqer/order' var='ordering.step.title.CustomerData.addressSave'}"
        >
    </div>

</section>

{template_event name="quiqqer::order::orderProcessCustomerData" User=$User Address=$Address}

<section class="quiqqer-order-customerData-comment">
    <header>
        <h1>{locale group="quiqqer/order" var="ordering.step.title.CustomerData.Comment"}</h1>
    </header>

    <div class="quiqqer-order-customerData-comment-description">
        {locale group="quiqqer/order" var="ordering.step.title.CustomerData.Comment.description"}
    </div>

    <label name="comment-label">
        <span>
            {locale group="quiqqer/order" var="ordering.step.title.CustomerData.Comment.customer"}
        </span>
        <input name="comment-customer" value="{$commentCustomer}" type="text"/>
    </label>

    <label name="comment-label">
        <span>
            {locale group="quiqqer/order" var="ordering.step.title.CustomerData.Comment.comment"}
        </span>
        <textarea name="comment-message">{$commentMessage}</textarea>
    </label>
</section>

{template_event name="quiqqer::order::orderProcessCustomerEnd" User=$User Address=$Address}