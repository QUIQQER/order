{template_event name="quiqqer::order::basket::begin" Basket=$Basket}

{if $Products->count()}
<table class="quiqqer-order-basket-articles">
    <thead>
    <tr class="quiqqer-order-basket-articles-header">
        <th class="quiqqer-order-basket-articles-header-pos"
            title="{locale group='quiqqer/erp' var='article.list.articles.header.pos'}"
        >
            {locale group="quiqqer/erp" var="article.list.articles.header.pos"}
        </th>
        <th class="quiqqer-order-basket-articles-header-information"
            title="{locale group='quiqqer/erp' var='article.list.articles.header.description'}"
        >
            {locale group="quiqqer/erp" var="article.list.articles.header.description"}
        </th>
        <th class="quiqqer-order-basket-articles-header-quantity"
            title="{locale group='quiqqer/erp' var='article.list.articles.header.quantity'}"
        >
            {locale group="quiqqer/erp" var="article.list.articles.header.quantity"}
        </th>
        <th class="quiqqer-order-basket-articles-unitPrice"
            title="{locale group='quiqqer/erp' var='article.list.articles.header.unitprice'}"
        >
            {locale group="quiqqer/erp" var="article.list.articles.header.unitprice"}
        </th>
        <th class="quiqqer-order-basket-articles-header-price"
            title="{locale group='quiqqer/erp' var='article.list.articles.header.price'}"
        >
            {locale group="quiqqer/erp" var="article.list.articles.header.price"}
        </th>
    </tr>
    </thead>
    <tbody>
    {assign var=pos value=1}
    {foreach $products as $product}
    <tr class="quiqqer-order-basket-articles-article">
        <td class="quiqqer-order-basket-articles-article-pos"
            data-label="{locale group='quiqqer/erp' var='article.list.articles.header.pos'}"
        >
            {$pos}
        </td>
        <td class="quiqqer-order-basket-articles-article-data"
            data-label="{locale group='quiqqer/erp' var='article.list.articles.header.description'}"
        >
            <div class="quiqqer-order-basket-articles-article-title">{$product.title}</div>
            <div class="quiqqer-order-basket-articles-article-description">
                {$product.description}
            </div>

            <ul class="quiqqer-order-basket-articles-article-fields">
                {foreach $product.attributes as $attribute}
                <li class="quiqqer-order-basket-articles-article-fields-field">
                    <span>{$attribute.title}:</span>
                    <span>{$attribute.valueText} {$attribute.value}</span>
                </li>
                {/foreach}
            </ul>
        </td>
        <td class="quiqqer-order-basket-articles-article-quantity"
            data-label="{locale group='quiqqer/erp' var='article.list.articles.header.quantity'}"
        >
            {$product.quantity}
        </td>
        <td class="quiqqer-order-basket-articles-article-price"
            data-label="{locale group='quiqqer/erp' var='article.list.articles.header.unitprice'}"
        >
            {$product.price}
        </td>
        <td class="quiqqer-order-basket-articles-article-sum"
            data-label="{locale group='quiqqer/erp' var='article.list.articles.header.price'}"
        >
            {$product.sum}
        </td>
    </tr>
    {assign var=pos value=$pos+1}
    {/foreach}
    </tbody>
</table>

{template_event name="quiqqer::order::basket::middle" Basket=$Basket}

<table class="quiqqer-order-basket-total">
    <tr class="quiqqer-order-basket-total-subSum">
        <td class="quiqqer-order-basket-total-firstCell">
            {locale group="quiqqer/products" var="product.list.products.subtotal"}
        </td>
        <td class="quiqqer-order-basket-total-secondCell">
            {$data.subSum}
        </td>
    </tr>

    {foreach $data.attributes as $attribute}
    <tr>
        <td>
            {$attribute.title} {if !empty($attribute.valueText)}({$attribute.valueText}){/if}
        </td>
        <td>
            {$attribute.value}
        </td>
    </tr>
    {/foreach}

    {if count($data.attributes)}
    <tr>
        <td colspan="2"><br/></td>
    </tr>
    {/if}

    {foreach $data.vat as $vat}
    <tr>
        <td>
            {$vat.text}
        </td>
        <td>
            {$vat.value}
        </td>
    </tr>
    {/foreach}

    {if count($data.attributes)}
    <tr>
        <td colspan="2"><br/></td>
    </tr>
    {/if}

    <tr class="quiqqer-order-basket-total-sum">
        <td>
            {locale group="quiqqer/products" var="product.list.products.sumtotal"}
        </td>
        <td>
            {$data.sum}
        </td>
    </tr>
</table>

{else}
<div class="quiqqer-order-basket-isEmpty">
    {locale group="quiqqer/order" var="message.basket.is.empty"}
</div>
{/if}

{template_event name="quiqqer::order::basket::end" Basket=$Basket}
